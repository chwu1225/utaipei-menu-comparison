<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ¡å‹™ç³»çµ±é¸å–® - å­¸ç”Ÿ/æ•™è·å“¡/æ•™å¸« ä¸‰ç‰ˆæœ¬å°ç…§</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
            background: #f5f7fa;
        }

        /* DEMO Banner - Semi-transparent (Left Corner) */
        .demo-ribbon {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            overflow: hidden;
            width: 150px;
            height: 150px;
            pointer-events: none;
        }

        .demo-ribbon span {
            position: absolute;
            display: block;
            width: 225px;
            padding: 10px 0;
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.75) 0%, rgba(238, 90, 90, 0.75) 100%);
            box-shadow: 0 5px 10px rgba(0,0,0,0.15);
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            text-shadow: 0 1px 1px rgba(0,0,0,0.3);
            text-align: center;
            left: -55px;
            top: 35px;
            transform: rotate(-45deg);
            letter-spacing: 1px;
        }

        .header {
            background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 500;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        /* Role Toggle - èº«åˆ†åˆ‡æ›ï¼ˆä¸‰å€‹é¸é …ï¼‰*/
        .role-toggle {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 4px;
        }

        .role-btn {
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            border: none;
            background: transparent;
            color: rgba(255,255,255,0.7);
        }

        .role-btn.active {
            background: white;
            color: #1e3a5f;
            font-weight: 600;
        }

        .role-btn:hover:not(.active) {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .role-btn.student.active {
            background: #48bb78;
            color: white;
        }

        .role-btn.staff.active {
            background: #ed8936;
            color: white;
        }

        .role-btn.teacher.active {
            background: #805ad5;
            color: white;
        }

        /* Current Role Indicator */
        .current-role {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .current-role.student { background: rgba(72, 187, 120, 0.3); }
        .current-role.staff { background: rgba(237, 137, 54, 0.3); }
        .current-role.teacher { background: rgba(128, 90, 213, 0.3); }

        /* Tabs */
        .tabs {
            display: flex;
            background: white;
            border-bottom: 2px solid #e2e8f0;
            padding: 0 30px;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            font-size: 15px;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }

        .tab:hover {
            background: #f7fafc;
        }

        .tab.active {
            border-bottom-color: #3182ce;
            color: #3182ce;
            font-weight: 600;
        }

        /* Main Container */
        .main-container {
            display: flex;
            min-height: calc(100vh - 120px);
        }

        /* Sidebar */
        .sidebar {
            width: 320px;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            height: calc(100vh - 120px);
            overflow-y: auto;
        }

        /* Menu Level 1 */
        .menu-level1 {
            border-bottom: 1px solid #e2e8f0;
        }

        .menu-level1-header {
            padding: 12px 15px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .menu-level1-header:hover {
            background: #f7fafc;
        }

        .menu-level1-header.student {
            border-left: 4px solid #48bb78;
            background: #f0fff4;
        }

        .menu-level1-header.staff {
            border-left: 4px solid #ed8936;
            background: #fffaf0;
        }

        .menu-level1-header.teacher {
            border-left: 4px solid #805ad5;
            background: #faf5ff;
        }

        .menu-level1-header .arrow {
            transition: transform 0.2s;
            font-size: 12px;
            color: #a0aec0;
        }

        .menu-level1-header.expanded .arrow {
            transform: rotate(90deg);
        }

        .menu-level1-content {
            display: none;
            background: #fafafa;
        }

        .menu-level1-content.expanded {
            display: block;
        }

        /* Menu Level 2 */
        .menu-level2 {
            border-bottom: 1px solid #f0f0f0;
        }

        .menu-level2-header {
            padding: 10px 15px 10px 25px;
            font-size: 13px;
            color: #4a5568;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .menu-level2-header:hover {
            background: #edf2f7;
        }

        .menu-level2-header .arrow {
            transition: transform 0.2s;
            font-size: 10px;
        }

        .menu-level2-header.expanded .arrow {
            transform: rotate(90deg);
        }

        .menu-level2-content {
            display: none;
            background: white;
        }

        .menu-level2-content.expanded {
            display: block;
        }

        /* Menu Level 3 - Items */
        .menu-item {
            padding: 8px 15px 8px 40px;
            font-size: 12px;
            color: #555;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .menu-item:hover {
            background: #ebf8ff;
            color: #2b6cb0;
        }

        /* Usage Badges */
        .usage-hot {
            background: #fed7d7;
            color: #c53030;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
        }

        .usage-warm {
            background: #feebc8;
            color: #c05621;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
        }

        .usage-normal {
            background: #e2e8f0;
            color: #4a5568;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
        }

        /* Teacher-specific badge */
        .badge-teacher-only {
            background: #e9d8fd;
            color: #553c9a;
            font-size: 9px;
            padding: 2px 5px;
            border-radius: 4px;
            margin-left: 5px;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            height: calc(100vh - 120px);
        }

        .content-area h2 {
            margin-bottom: 20px;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Stats Section */
        .stats-section {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            color: white;
        }

        .stats-section.student {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        .stats-section.staff {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
        }

        .stats-section.teacher {
            background: linear-gradient(135deg, #805ad5 0%, #6b46c1 100%);
        }

        .stats-section h3 {
            margin-bottom: 15px;
            font-size: 16px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item .number {
            font-size: 28px;
            font-weight: bold;
        }

        .stat-item .label {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Role Summary Cards */
        .role-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .role-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .role-card h4 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .role-card.student h4 {
            color: #38a169;
            border-bottom-color: #c6f6d5;
        }

        .role-card.staff h4 {
            color: #dd6b20;
            border-bottom-color: #feebc8;
        }

        .role-card.teacher h4 {
            color: #805ad5;
            border-bottom-color: #e9d8fd;
        }

        .role-stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f7fafc;
            font-size: 14px;
        }

        .role-stat-row:last-child {
            border-bottom: none;
        }

        /* Top Functions */
        .top-functions {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .top-functions h3 {
            margin-bottom: 15px;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .function-row {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .function-row:last-child {
            border-bottom: none;
        }

        .function-rank {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            margin-right: 12px;
        }

        .function-rank.gold { background: #ffd700; color: #744210; }
        .function-rank.silver { background: #c0c0c0; color: #4a5568; }
        .function-rank.bronze { background: #cd7f32; color: white; }
        .function-rank.normal { background: #e2e8f0; color: #4a5568; }

        .function-name {
            flex: 1;
            font-size: 13px;
        }

        .function-count {
            font-size: 12px;
            color: #718096;
            margin-right: 10px;
        }

        .function-bar {
            width: 80px;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .function-bar-fill {
            height: 100%;
            border-radius: 3px;
        }

        .function-bar-fill.student {
            background: linear-gradient(90deg, #48bb78, #38a169);
        }

        .function-bar-fill.staff {
            background: linear-gradient(90deg, #ed8936, #dd6b20);
        }

        .function-bar-fill.teacher {
            background: linear-gradient(90deg, #805ad5, #6b46c1);
        }

        /* Comparison View */
        .comparison-view {
            display: none;
            padding: 30px;
        }

        .comparison-view.active {
            display: block;
        }

        .comparison-table-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th {
            padding: 12px 15px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
        }

        .comparison-table th.student-header {
            background: #48bb78;
            color: white;
        }

        .comparison-table th.staff-header {
            background: #ed8936;
            color: white;
        }

        .comparison-table th.teacher-header {
            background: #805ad5;
            color: white;
        }

        .comparison-table th.shared-header {
            background: #4a5568;
            color: white;
        }

        .comparison-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 12px;
            vertical-align: top;
        }

        .comparison-table tr:hover {
            background: #f7fafc;
        }

        .badge-student {
            background: #c6f6d5;
            color: #276749;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .badge-staff {
            background: #feebc8;
            color: #c05621;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .badge-teacher {
            background: #e9d8fd;
            color: #553c9a;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .badge-shared {
            background: #e2e8f0;
            color: #4a5568;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* Difference highlight */
        .diff-highlight {
            background: #faf5ff;
            border-left: 3px solid #805ad5;
            padding: 2px 5px;
            margin: 2px 0;
            font-size: 11px;
        }

        /* Info Box */
        .info-box {
            background: #ebf8ff;
            border-left: 4px solid #3182ce;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
        }

        .info-box.warning {
            background: #faf5ff;
            border-left-color: #805ad5;
        }

        .info-box h4 {
            color: #2b6cb0;
            margin-bottom: 8px;
        }

        .info-box.warning h4 {
            color: #553c9a;
        }

        .info-box p, .info-box ul {
            color: #2c5282;
            font-size: 13px;
        }

        .info-box.warning p, .info-box.warning ul {
            color: #44337a;
        }

        .info-box ul {
            padding-left: 20px;
            line-height: 1.8;
        }

        /* Quick Actions Grid */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .action-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
        }

        .action-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.1);
        }

        .action-card .icon {
            width: 50px;
            height: 50px;
            margin: 0 auto 10px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .action-card.student .icon { background: #c6f6d5; color: #276749; }
        .action-card.staff .icon { background: #feebc8; color: #c05621; }
        .action-card.teacher .icon { background: #e9d8fd; color: #553c9a; }

        .action-card h4 {
            font-size: 14px;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .action-card p {
            font-size: 12px;
            color: #a0aec0;
        }

        .action-card .rank-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 11px;
            color: white;
        }

        .action-card.student .rank-badge { background: #38a169; }
        .action-card.staff .rank-badge { background: #dd6b20; }
        .action-card.teacher .rank-badge { background: #805ad5; }

        /* Teacher Extra Functions Box */
        .teacher-extra-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #d6bcfa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .teacher-extra-box h4 {
            color: #553c9a;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .teacher-extra-category {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #805ad5;
        }

        .teacher-extra-category h5 {
            color: #805ad5;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .teacher-extra-category ul {
            list-style: none;
            padding: 0;
        }

        .teacher-extra-category li {
            padding: 5px 0;
            font-size: 13px;
            color: #4a5568;
            border-bottom: 1px dashed #e2e8f0;
        }

        .teacher-extra-category li:last-child {
            border-bottom: none;
        }

        /* Hidden content */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Demo Ribbon -->
    <div class="demo-ribbon">
        <span>è¨ˆä¸­å±•ç¤ºç‰ˆ</span>
    </div>

    <div class="header">
        <h1>è‡ºåŒ—å¸‚ç«‹å¤§å­¸ æ ¡å‹™ç³»çµ±</h1>
        <div class="header-controls">
            <div class="role-toggle">
                <button class="role-btn student active" onclick="switchRole('student')">ğŸ“ å­¸ç”Ÿ</button>
                <button class="role-btn staff" onclick="switchRole('staff')">ğŸ‘” è·å“¡</button>
                <button class="role-btn teacher" onclick="switchRole('teacher')">ğŸ‘¨â€ğŸ« æ•™å¸«</button>
            </div>
            <div class="current-role student" id="currentRole">
                <span id="roleIcon">ğŸ“</span>
                <span id="roleName">å­¸ç”Ÿ OOO (U1110****)</span>
            </div>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('preview')">ğŸ‘ï¸ é¸å–®é è¦½</div>
        <div class="tab" onclick="switchTab('comparison')">ğŸ”„ ä¸‰ç‰ˆæœ¬å°ç…§</div>
        <div class="tab" onclick="switchTab('teacher-diff')">ğŸ“ æ•™å¸«å°ˆå±¬åŠŸèƒ½</div>
        <div class="tab" onclick="switchTab('stats')">ğŸ“Š æˆ‘çš„æœ€æ„›çµ±è¨ˆ</div>
    </div>

    <!-- Preview View -->
    <div class="main-container" id="previewView">
        <div class="sidebar" id="menuSidebar">
            <!-- Menu will be rendered here -->
        </div>
        <div class="content-area">
            <h2 id="contentTitle">
                <span id="titleIcon">ğŸ“</span>
                <span id="titleText">å­¸ç”Ÿé¸å–®çµæ§‹</span>
            </h2>

            <div class="stats-section student" id="statsHeader">
                <h3>ğŸ“Š é¸å–®çµ±è¨ˆæ‘˜è¦</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="number" id="statCategories">13</div>
                        <div class="label">ä¸»é¡åˆ¥</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" id="statSubcategories">25</div>
                        <div class="label">å­é¡åˆ¥</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" id="statFunctions">85</div>
                        <div class="label">åŠŸèƒ½é …</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" id="statLevels">3</div>
                        <div class="label">å±¤ç´šæ·±åº¦</div>
                    </div>
                </div>
            </div>

            <div class="top-functions">
                <h3 id="topFunctionsTitle">ğŸ”¥ ç†±é–€åŠŸèƒ½ Top 8ï¼ˆä¾æˆ‘çš„æœ€æ„›çµ±è¨ˆï¼‰</h3>
                <div class="quick-actions" id="quickActionsGrid">
                    <!-- Quick actions will be rendered here -->
                </div>
            </div>

            <div class="top-functions">
                <h3>ğŸ“ˆ å®Œæ•´æ’è¡Œæ¦œ Top 10</h3>
                <div id="topFunctionsList">
                    <!-- Rankings will be rendered here -->
                </div>
            </div>

            <div class="info-box" id="infoBox">
                <h4>ğŸ’¡ é¸å–®ç‰¹è‰²èªªæ˜</h4>
                <ul id="infoList">
                    <!-- Info will be rendered here -->
                </ul>
            </div>
        </div>
    </div>

    <!-- Comparison View -->
    <div class="comparison-view" id="comparisonView">
        <h2>ğŸ”„ å­¸ç”Ÿ vs è·å“¡ vs æ•™å¸« é¸å–®å°ç…§</h2>

        <div class="role-summary">
            <div class="role-card student">
                <h4>ğŸ“ å­¸ç”Ÿé¸å–®</h4>
                <div class="role-stat-row">
                    <span>ä¸»é¡åˆ¥æ•¸</span>
                    <span><strong>13</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>ç¸½åŠŸèƒ½æ•¸</span>
                    <span><strong>~85</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>å°ˆå±¬é¡åˆ¥</span>
                    <span><strong>2</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>èº«åˆ†ä»£ç¢¼</span>
                    <span><strong>02</strong></span>
                </div>
            </div>
            <div class="role-card staff">
                <h4>ğŸ‘” è·å“¡é¸å–®</h4>
                <div class="role-stat-row">
                    <span>ä¸»é¡åˆ¥æ•¸</span>
                    <span><strong>17</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>ç¸½åŠŸèƒ½æ•¸</span>
                    <span><strong>~75</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>å°ˆå±¬é¡åˆ¥</span>
                    <span><strong>6</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>èº«åˆ†ä»£ç¢¼</span>
                    <span><strong>01</strong></span>
                </div>
            </div>
            <div class="role-card teacher">
                <h4>ğŸ‘¨â€ğŸ« æ•™å¸«é¸å–®</h4>
                <div class="role-stat-row">
                    <span>ä¸»é¡åˆ¥æ•¸</span>
                    <span><strong>17</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>ç¸½åŠŸèƒ½æ•¸</span>
                    <span><strong>~95</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>é¡å¤–åŠŸèƒ½</span>
                    <span><strong>+20</strong> å€‹</span>
                </div>
                <div class="role-stat-row">
                    <span>èº«åˆ†ä»£ç¢¼</span>
                    <span><strong>01+1A+1B</strong></span>
                </div>
            </div>
        </div>

        <div class="info-box warning" style="margin-bottom: 20px;">
            <h4>ğŸ“ èº«åˆ†æ¬Šé™æ¶æ§‹</h4>
            <p><strong>æ•™å¸«å¸³è™Ÿ = è·å“¡åŸºæœ¬æ¬Šé™ + æˆèª²æ•™å¸«(1A) + å°å¸«(1B) + ä¸»ç®¡æ¬Šé™(è‹¥æœ‰)</strong></p>
            <p style="margin-top: 10px;">æ•™å¸«é¸å–®æ˜¯è·å“¡é¸å–®çš„ã€Œè¶…é›†(superset)ã€ï¼ŒåŒ…å«æ‰€æœ‰è·å“¡åŠŸèƒ½å†åŠ ä¸Šæ•™å­¸ã€å°å¸«ã€ä¸»ç®¡ç›¸é—œåŠŸèƒ½ã€‚</p>
        </div>

        <div class="comparison-table-container">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th class="shared-header">é¡åˆ¥</th>
                        <th class="student-header">ğŸ“ å­¸ç”Ÿ</th>
                        <th class="staff-header">ğŸ‘” è·å“¡</th>
                        <th class="teacher-header">ğŸ‘¨â€ğŸ« æ•™å¸«</th>
                        <th class="shared-header">å·®ç•°èªªæ˜</th>
                    </tr>
                </thead>
                <tbody id="comparisonBody">
                    <!-- Comparison rows will be rendered here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Teacher Difference View -->
    <div class="comparison-view" id="teacherDiffView">
        <h2>ğŸ“ æ•™å¸«å°ˆå±¬åŠŸèƒ½åˆ†æï¼ˆèˆ‡è·å“¡æ¯”è¼ƒï¼‰</h2>

        <div class="info-box warning" style="margin-bottom: 20px;">
            <h4>âš ï¸ é‡è¦ç™¼ç¾ï¼šæ•™å¸«é¸å–® â‰  è·å“¡é¸å–®</h4>
            <ul>
                <li><strong>æ•™å¸«é¸å–®</strong>æ˜¯è·å“¡é¸å–®çš„<strong>è¶…é›†(superset)</strong></li>
                <li>æ•™å¸«å¸³è™ŸåŒæ™‚æ“æœ‰å¤šé‡èº«åˆ†ï¼šè·å“¡(01) + æˆèª²æ•™å¸«(1A) + å°å¸«(1B)</li>
                <li>é¡å¤–ç´„ <strong>20 å€‹</strong>æ•™å¸«å°ˆå±¬åŠŸèƒ½</li>
            </ul>
        </div>

        <div class="teacher-extra-box">
            <h4>ğŸŸ£ æ•™å¸«ç›¸å°æ–¼è·å“¡çš„é¡å¤–åŠŸèƒ½</h4>

            <div class="teacher-extra-category">
                <h5>ğŸ“š æˆèª²æ•™å¸«åŠŸèƒ½ (sts_id = 1A)</h5>
                <ul>
                    <li>ğŸ“‹ èª²ç¨‹å¤§ç¶±è¼¸å…¥ä½œæ¥­ï¼ˆé è¨­æˆ‘çš„æœ€æ„›ï¼‰</li>
                    <li>âœï¸ å­¸æœŸæˆç¸¾è¼¸å…¥ä½œæ¥­ï¼ˆé è¨­æˆ‘çš„æœ€æ„›ï¼‰</li>
                    <li>ğŸ“ æˆèª²è€å¸«ç¶²è·¯é»åä½œæ¥­ï¼ˆé è¨­æˆ‘çš„æœ€æ„›ï¼‰</li>
                    <li>ğŸ” é–‹èª²é¸èª²è³‡æ–™æŸ¥è©¢(å«é»åå–®)</li>
                    <li>âš ï¸ å­¸ç”Ÿå­¸ç¿’é è­¦</li>
                </ul>
            </div>

            <div class="teacher-extra-category">
                <h5>ğŸ‘¨â€ğŸ« å°å¸«åŠŸèƒ½ (sts_id = 1B)</h5>
                <ul>
                    <li>ğŸ“‹ ç­ç´šå­¸ç”Ÿå­¸ç±æŸ¥è©¢</li>
                    <li>ğŸ† ç­ç´šå¹¹éƒ¨ç•¶é¸äººåå–®ç™»éŒ„</li>
                    <li>ğŸ“ å°å¸«å€‹åˆ¥è¼”å°ç´€éŒ„ç™»éŒ„</li>
                    <li>ğŸ‘¥ å°å¸«åœ˜é«”è¼”å°ç™»éŒ„ä½œæ¥­</li>
                    <li>â­ å°å¸«æ“è¡Œæˆç¸¾ç™»éŒ„ä½œæ¥­</li>
                    <li>ğŸ“Š å­¸å‹™è³‡è¨ŠæŸ¥è©¢ï¼ˆå°å¸«ç›¸é—œï¼‰</li>
                </ul>
            </div>

            <div class="teacher-extra-category">
                <h5>ğŸ‘” ä¸»ç®¡æŸ¥è©¢åŠŸèƒ½ï¼ˆè‹¥æœ‰ä¸»ç®¡èº«åˆ†ï¼‰</h5>
                <ul>
                    <li>ğŸ“Š ä¸€ç´šä¸»ç®¡å‡ºå‹¤æŸ¥è©¢</li>
                    <li>ğŸ¢ å…¨æ ¡å“¡å·¥å‡ºå‹¤æŸ¥è©¢</li>
                    <li>â° ä¸»ç®¡æŸ¥è©¢å–®ä½åŒä»åˆ·å¡è¨˜éŒ„</li>
                    <li>ğŸ“… ä¸»ç®¡æŸ¥è©¢å–®ä½åŒä»è«‹å‡è¨˜éŒ„</li>
                </ul>
            </div>

            <div class="teacher-extra-category">
                <h5>â­ é è¨­æˆ‘çš„æœ€æ„›ï¼ˆæ•™å¸«ç‰ˆç¨æœ‰ï¼‰</h5>
                <ul>
                    <li>èª²ç¨‹å¤§ç¶±è¼¸å…¥ä½œæ¥­</li>
                    <li>å­¸æœŸæˆç¸¾è¼¸å…¥ä½œæ¥­</li>
                    <li>æˆèª²è€å¸«ç¶²è·¯é»åä½œæ¥­</li>
                    <li>å°å¸«æ“è¡Œæˆç¸¾ç™»éŒ„ä½œæ¥­</li>
                    <li>å°å¸«å€‹åˆ¥è¼”å°ç´€éŒ„ç™»éŒ„</li>
                    <li>å°å¸«åœ˜é«”è¼”å°ç™»éŒ„ä½œæ¥­</li>
                </ul>
            </div>
        </div>

        <div class="top-functions">
            <h3>ğŸ“Š æ•™å¸« vs è·å“¡ åŠŸèƒ½æ•¸é‡æ¯”è¼ƒ</h3>
            <table class="comparison-table" style="margin-top: 15px;">
                <thead>
                    <tr>
                        <th class="shared-header">é¡åˆ¥</th>
                        <th class="staff-header">ğŸ‘” è·å“¡</th>
                        <th class="teacher-header">ğŸ‘¨â€ğŸ« æ•™å¸«</th>
                        <th class="shared-header">å·®ç•°</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>æˆ‘çš„æœ€æ„›</strong></td>
                        <td>ç©ºç™½</td>
                        <td>6é …é è¨­</td>
                        <td><span class="badge-teacher">+6 é è¨­é …ç›®</span></td>
                    </tr>
                    <tr>
                        <td><strong>æŸ¥è©¢ > æ•™å‹™è³‡è¨Š</strong></td>
                        <td>11 é …</td>
                        <td>14 é …</td>
                        <td><span class="badge-teacher">+3 é …</span></td>
                    </tr>
                    <tr>
                        <td><strong>æŸ¥è©¢ > å­¸å‹™è³‡è¨Š</strong></td>
                        <td>0 é …</td>
                        <td>å°å¸«ç›¸é—œåŠŸèƒ½</td>
                        <td><span class="badge-teacher">æ–°å¢é¡åˆ¥</span></td>
                    </tr>
                    <tr>
                        <td><strong>ç™»éŒ„ > å­¸å‹™ç™»éŒ„</strong></td>
                        <td>2 é …</td>
                        <td>7 é …</td>
                        <td><span class="badge-teacher">+5 é …</span></td>
                    </tr>
                    <tr>
                        <td><strong>ç™»éŒ„ > æ•™å‹™è³‡è¨Š</strong></td>
                        <td>3 é …</td>
                        <td>4 é …</td>
                        <td><span class="badge-teacher">+1 é …</span></td>
                    </tr>
                    <tr>
                        <td><strong>äººäº‹ç³»çµ± > å·®å‹¤æŸ¥è©¢</strong></td>
                        <td>1 é …</td>
                        <td>5 é …</td>
                        <td><span class="badge-teacher">+4 ä¸»ç®¡åŠŸèƒ½</span></td>
                    </tr>
                    <tr style="background: #faf5ff;">
                        <td><strong>ç¸½è¨ˆ</strong></td>
                        <td><strong>~75 é …</strong></td>
                        <td><strong>~95 é …</strong></td>
                        <td><span class="badge-teacher"><strong>+20 é …</strong></span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Stats View -->
    <div class="comparison-view" id="statsView">
        <h2 id="statsViewTitle">ğŸ“Š æˆ‘çš„æœ€æ„›çµ±è¨ˆåˆ†æ</h2>

        <div class="role-summary">
            <div class="role-card student">
                <h4>ğŸ“ å­¸ç”Ÿç†±é–€åŠŸèƒ½</h4>
                <div id="studentTopList">
                    <!-- Student top functions -->
                </div>
            </div>
            <div class="role-card staff">
                <h4>ğŸ‘” è·å“¡ç†±é–€åŠŸèƒ½</h4>
                <div id="staffTopList">
                    <!-- Staff top functions -->
                </div>
            </div>
            <div class="role-card teacher">
                <h4>ğŸ‘¨â€ğŸ« æ•™å¸«ç†±é–€åŠŸèƒ½</h4>
                <div id="teacherTopList">
                    <!-- Teacher top functions -->
                </div>
            </div>
        </div>

        <div class="top-functions">
            <h3>ğŸ† å…¨é«”ä½¿ç”¨è€…ç†±é–€åŠŸèƒ½æ’è¡Œæ¦œ</h3>
            <div id="overallRankingList">
                <!-- Overall rankings -->
            </div>
        </div>

        <div class="info-box">
            <h4>ğŸ“ˆ çµ±è¨ˆæ´å¯Ÿ</h4>
            <ul>
                <li><strong>è³‡æ–™ä¾†æºï¼š</strong>s90_auth_favorite è³‡æ–™è¡¨ï¼ˆ7,071 ç­†æ”¶è—è¨˜éŒ„ï¼‰</li>
                <li><strong>æ¶µè“‹åŠŸèƒ½ï¼š</strong>151 å€‹åŠŸèƒ½è¢«æ”¶è—ï¼ˆå…± 288 å€‹åŠŸèƒ½ï¼Œä½¿ç”¨ç‡ 52%ï¼‰</li>
                <li><strong>å­¸ç”Ÿ vs æ•™è·å“¡ï¼š</strong>å­¸ç”Ÿè¼ƒå¸¸ç”¨é¸èª²ã€æˆç¸¾æŸ¥è©¢ï¼›æ•™è·å“¡è¼ƒå¸¸ç”¨ç°½æ ¸ã€æˆç¸¾ç™»éŒ„</li>
                <li><strong>æ•™å¸«ç‰¹è‰²ï¼š</strong>æˆç¸¾ç™»éŒ„ã€é»åä½œæ¥­ã€èª²ç¨‹å¤§ç¶±ä½¿ç”¨ç‡æœ€é«˜</li>
                <li><strong>å»ºè­°ï¼š</strong>æ–°ç‰ˆé¸å–®æ‡‰ä¾èº«åˆ†é¡¯ç¤ºä¸åŒçš„å¿«æ·åŠŸèƒ½</li>
            </ul>
        </div>
    </div>

    <script>
        // Current role state
        let currentRole = 'student';

        // å­¸ç”Ÿé¸å–®çµæ§‹
        const studentMenuStructure = [
            {
                name: "æˆ‘çš„æœ€æ„›",
                children: [{ name: "ç·¨è¼¯æˆ‘çš„æœ€æ„›", items: [] }]
            },
            {
                name: "å­¸ç”ŸEP (å­¸ç”Ÿå­¸ç¿’æ­·ç¨‹)",
                children: [
                    { name: "å€‹äººå±¥æ­·ç·¨è¼¯(å«EPå¡«å ±)", items: [
                        "å­¸ç”Ÿå­¸ç¿’æ­·ç¨‹è³‡æ–™åŒ¯å…¥(é™ç›´å‡å­¸ç”Ÿä½¿ç”¨)", "å€‹äººåŸºæœ¬è³‡æ–™", "å­¸ç¶“æ­·",
                        "è‡ªå‚³", "æ´»å‹•ç´€éŒ„", "ç²çç´€éŒ„", "è­‰ç…§ç´€éŒ„", "å¸«é•·æ¨è–¦å‡½", "å·¥ä½œç¶“æ­·", "ç¤¾åœ˜å¹¹éƒ¨"
                    ]},
                    { name: "ä¿®èª²æ­·ç¨‹è¨˜éŒ„", items: ["ä¿®èª²ç´€éŒ„", "æˆç¸¾ç´€éŒ„"] },
                    { name: "å±¥æ­·è£½ä½œè¨­å®šèˆ‡åˆ—å°", items: ["å±¥æ­·è£½ä½œè¨­å®šèˆ‡åˆ—å°"] }
                ]
            },
            {
                name: "é¸èª²ä½œæ¥­",
                children: [
                    { name: "ç¶²è·¯é¸èª²", items: [
                        { name: "å¸«åŸ¹å­¸ç¨‹èª²ç¨‹åŠ é€€é¸", fncId: "00B01" },
                        { name: "é›™ä¸»ä¿®èª²ç¨‹åŠ é€€é¸", fncId: "00B02" },
                        { name: "è¼”ç³»èª²ç¨‹åŠ é€€é¸", fncId: "00B03" },
                        { name: "å­¸åˆ†å­¸ç¨‹åŠ é€€é¸", fncId: "00B04" },
                        { name: "ä¸€èˆ¬ç·šä¸ŠåŠ é€€é¸", fncId: "0A000" },
                        "é¸èª²çµæœæŸ¥è©¢"
                    ]},
                    { name: "å¸«åŸ¹é é¸", items: [{ name: "å¸«åŸ¹å­¸ç¨‹èª²ç¨‹é é¸", fncId: "00B05" }] },
                    { name: "å¿—é¡˜é¸èª²", items: ["é€šè­˜é«”è‚²å¿—é¡˜é¸èª²", "å¿—é¡˜é¸èª²çµæœæŸ¥è©¢"] }
                ]
            },
            {
                name: "ç³»çµ±å…¬å‘Šèˆ‡ä¸‹è¼‰",
                children: [
                    { name: "è¡Œäº‹æ›†", items: ["è¡Œäº‹æ›†æŸ¥è©¢åˆ—å°ä½œæ¥­"] }
                ]
            },
            {
                name: "æŸ¥è©¢",
                children: [
                    { name: "æ•™å‹™è³‡è¨ŠæŸ¥è©¢", items: [
                        { name: "å­¸ç”Ÿæ­·å¹´æˆç¸¾æŸ¥è©¢", fncId: "AG102" },
                        { name: "ç§‘ç›®èˆ‡æ•™å¸«é–‹èª²è³‡æ–™æŸ¥è©¢", fncId: "AG203" },
                        { name: "æˆ‘çš„èª²è¡¨", fncId: "AG222" },
                        { name: "åœ¨å­¸è­‰æ˜", fncId: "AG225" },
                        { name: "æ•™å¸«èª²è¡¨æŸ¥è©¢", fncId: "AG300" },
                        { name: "æ•™å®¤èª²è¡¨æŸ¥è©¢", fncId: "AG302" },
                        { name: "ç³»æ‰€ç­ç´šèª²è¡¨æŸ¥è©¢", fncId: "AG304" },
                        { name: "æœŸä¸­é è­¦æŸ¥è©¢", fncId: "AG305" },
                        { name: "ç•¢æ¥­å¯©æ ¸çµæœæŸ¥è©¢", fncId: "AG650" },
                        "ç•¢æ¥­å¯©æ ¸çµæœæŸ¥è©¢_1", "å­¸ç”Ÿå°±å­¸è¨˜éŒ„", "é›¢æ ¡å¯©æ ¸æŸ¥è©¢"
                    ]},
                    { name: "å­¸å‹™è³‡è¨ŠæŸ¥è©¢", items: [
                        { name: "å­¸ç”Ÿå€‹äººç¼ºæ› è«‹å‡æ˜ç´°è¡¨", fncId: "AK002" },
                        "å­¸ç”Ÿå€‹äººçæ‡²ç‹€æ³æ˜ç´°è¡¨", "å­¸ç”Ÿå®¿èˆç”³è«‹æŸ¥è©¢",
                        "å¼±å‹¢åŠ©å­¸é‡‘ç”³è¾¦çµæœæŸ¥è©¢", "æ ¡å…§(å¤–)çå­¸é‡‘ç”³è«‹çµæœæŸ¥è©¢",
                        "å°±å­¸è²¸æ¬¾ç”³è«‹çµæœæŸ¥è©¢", "å„ªå¾…æ¸›å…ç”³è«‹çµæœæŸ¥è©¢"
                    ]}
                ]
            },
            {
                name: "ç™»éŒ„",
                children: [
                    { name: "æ•™å‹™è³‡è¨Šç™»éŒ„", items: [
                        "å­¸ç±åŸºæœ¬è³‡æ–™ç¶­è­·", "å­¸ç”Ÿç…§ç‰‡ä¸Šå‚³/æŸ¥è©¢ä½œæ¥­", "å­¸ç”ŸæŠµå…ç”³è«‹",
                        "èª²ç¨‹åœä¿®ç”³è«‹ä½œæ¥­", "å­¸ç”Ÿè­‰ç·šä¸Šæ›å¤±æš¨ç”³è«‹è£œç™¼ä½œæ¥­", "ç•¢æ¥­é›¢æ ¡ç”³è«‹", "æˆç¸¾å„ªè‰¯çå‹µç™»éŒ„"
                    ]},
                    { name: "å­¸å‹™ç™»éŒ„ä½œæ¥­", items: [
                        "ç¤¾åœ˜æˆå“¡ç™»éŒ„ä½œæ¥­", "å·¥è®€å­¸ç¶“æ­·è¼¸å…¥ä½œæ¥­", "åƒèˆ‡ç«¶è³½è¼¸å…¥ä½œæ¥­",
                        "æ ¡å¤–ç§Ÿå±‹è³‡æ–™ç™»éŒ„", "å•å·èª¿æŸ¥", "å·¥è®€åŠ©å­¸æœå‹™å­¸ç¿’ç™»éŒ„"
                    ]},
                    { name: "å¸«åŸ¹è³‡è¨Šç™»éŒ„", items: [
                        "å¸«åŸ¹æŠµå…ç”³è«‹", "æ•™ç¨‹èª²ç¨‹ç™»éŒ„å¯¦åœ°å­¸ç¿’æ™‚æ•¸(æ•™å¸«)", "å¸«åŸ¹è‡ªå¯©ä½œæ¥­",
                        "æ”¾æ£„å¸«è³‡ç”Ÿç”³è«‹ä½œæ¥­", "å¸«è³‡ç”Ÿå¯¦åœ°å­¸ç¿’æ™‚æ•¸ç™»éŒ„ä½œæ¥­(å­¸ç”Ÿ)", "å“çç”ŸçºŒçå¯©æŸ¥ä½œæ¥­", "æ•™å¸«æª¢å®šæ¨¡æ“¬æ¸¬é©—ä½œæ¥­"
                    ]},
                    { name: "å…¶å®ƒè³‡è¨Šç™»éŒ„", items: ["æ•™å­¸è©•é‡ç™»éŒ„ä½œæ¥­", "å­¸ç”Ÿæµå‘è¿½è¹¤å•å·èª¿æŸ¥"] }
                ]
            },
            {
                name: "ç”³è«‹",
                children: [
                    { name: "é€šè­˜è³‡è¨Šç”³è«‹", items: ["è‹±æ–‡è¨¼ç…§æŠµå…èª²ç¨‹ç”³è«‹", "åœ‹æ–‡æœƒè€ƒç”³è«‹"] },
                    { name: "å­¸å‹™è³‡è¨Šç”³è«‹", items: [
                        "å·¥è®€å–®ä½æŸ¥è©¢", "å·¥è®€åŠ©å­¸ç´„(é€²)ç”¨ç”³è«‹ä½œæ¥­", "å°±å­¸è²¸æ¬¾ç”³è«‹",
                        "å¤§å°ˆå¼±å‹¢å­¸ç”ŸåŠ©å­¸è£œåŠ©ç”³è«‹", "ç‡Ÿé¤Šè«®è©¢é ç´„ç”³è«‹", "è«®å•†æœå‹™é ç´„ç”³è«‹",
                        "ç¤¾åœ˜æ´»å‹•ç”³è«‹ä½œæ¥­", "æ ¡å…§çå­¸é‡‘", "æ ¡å¤–çå­¸é‡‘", "å­¸ç”Ÿå®¿èˆç”³è«‹",
                        "å­¸ç”Ÿå®¿èˆçµ„å¯¢ç¾¤çµ„ç”³è«‹", "æ–°ç”Ÿå®¿èˆç”³è«‹", "å„ªå¾…æ¸›å…ç”³è«‹ä½œæ¥­", "å­¸ç”Ÿå®¿èˆå¹¹éƒ¨é¸èˆ‰"
                    ]},
                    { name: "å¸«åŸ¹è³‡è¨Šç”³è«‹", items: ["æ•™ç¨‹ç”„è©¦å ±å", "å“çç”Ÿå ±åç”³è«‹ä½œæ¥­"] },
                    { name: "åœ‹éš›äº¤æµç”³è«‹", items: ["äº¤æ›å‡ºåœ‹ç”³è«‹ä½œæ¥­"] }
                ]
            },
            {
                name: "è–ªè³‡ç³»çµ±",
                children: [
                    { name: "è–ªè³‡æ˜ç´°æŸ¥è©¢", items: [{ name: "åŠƒæ’¥å…¥å¸³æŸ¥è©¢", fncId: "ZGB204" }] }
                ]
            },
            {
                name: "å‡ºç´ç³»çµ±",
                children: [
                    { name: "ç¹³è²»æŸ¥è©¢", items: [
                        { name: "ç¹³è²»å–®åˆ—å°ä½œæ¥­", fncId: "ZGC204" },
                        "ç¹³è²»è­‰æ˜å–®åˆ—å°ä½œæ¥­", "å­¸ç”Ÿä¿®èª²æ”¶è²»ä¸€è¦½è¡¨"
                    ]}
                ]
            },
            {
                name: "ç ”è¨æœƒç³»çµ±",
                children: [
                    { name: "ç ”è¨æœƒå ±åç®¡ç†", items: ["æ´»å‹•å…¬å‘Šè¨Šæ¯æª¢è¦–", "æ´»å‹•è³‡è¨ŠæŸ¥è©¢åŠå ±å", "æ´»å‹•å ±åä¿®æ”¹å–æ¶ˆåŠæŸ¥è©¢"] }
                ]
            },
            {
                name: "ç¸½å‹™ç³»çµ±",
                children: [
                    { name: "å™¨æå€Ÿç”¨ç®¡ç†", items: ["é«”è‚²å™¨æå€Ÿç”¨ç”³è«‹ä½œæ¥­"] }
                ]
            },
            {
                name: "åŠ©ç†ç´„(é€²)ç”¨ç®¡ç†ç³»çµ±",
                children: [
                    { name: "ç™»éŒ„", items: [{ name: "æ‡‰è˜äººå“¡ç¢ºèªä½œæ¥­", fncId: "UAA002_1" }] }
                ]
            },
            {
                name: "æŠ•ç¥¨èˆ‡æ»¿æ„åº¦èª¿æŸ¥ç³»çµ±",
                children: [
                    { name: "æŠ•ç¥¨èˆ‡æ»¿æ„åº¦", items: ["é¤å»³æ»¿æ„åº¦å¡«å¯«ä½œæ¥­", "ç¥¨é¸æ´»å‹•å ±åä½œæ¥­", "æŠ•ç¥¨ä½œæ¥­"] }
                ]
            }
        ];

        // è·å“¡é¸å–®çµæ§‹ï¼ˆåŸºç¤ç‰ˆï¼‰
        const staffMenuStructure = [
            {
                name: "æˆ‘çš„æœ€æ„›",
                children: [{ name: "ç·¨è¼¯æˆ‘çš„æœ€æ„›", items: [] }]
            },
            {
                name: "ç³»çµ±å…¬å‘Šèˆ‡ä¸‹è¼‰",
                children: [
                    { name: "æ“ä½œæ‰‹å†Š", items: ["æ•™è·å“¡å·¥--æ‰‹å†Šä¸‹è¼‰"] },
                    { name: "è¡Œäº‹æ›†", items: ["è¡Œäº‹æ›†æŸ¥è©¢åˆ—å°ä½œæ¥­"] }
                ]
            },
            {
                name: "è¨Šæ¯å¹³å°",
                children: [
                    { name: "è¨Šæ¯å¹³å°ç³»çµ±", items: ["ä½¿ç”¨è€…æ¬Šé™è¨­å®š", "é€šå‘Šè¨Šæ¯ç”³è«‹ä½œæ¥­", "é€šå‘Šç”³è«‹ç°½æ ¸ä½œæ¥­"] }
                ]
            },
            {
                name: "æŸ¥è©¢",
                children: [
                    { name: "æ•™å‹™è³‡è¨ŠæŸ¥è©¢", items: [
                        "æ•™å­¸è©•é‡çµæœæŸ¥è©¢", "æ•™å­¸è©•é‡å³æ™‚å¡«ç­”ç‡æŸ¥è©¢",
                        { name: "ç§‘ç›®èˆ‡æ•™å¸«é–‹èª²è³‡æ–™æŸ¥è©¢", fncId: "AG203" },
                        "å­¸ç”Ÿå­¸ç¿’é è­¦æŸ¥è©¢(å°å¸«ç”¨)", "ç•¢æ¥­è³‡æ ¼é å¯©è¡¨æŸ¥è©¢",
                        { name: "æ•™å¸«èª²è¡¨æŸ¥è©¢", fncId: "AG300" },
                        { name: "æ•™å®¤èª²è¡¨æŸ¥è©¢", fncId: "AG302" },
                        { name: "ç³»æ‰€ç­ç´šèª²è¡¨æŸ¥è©¢", fncId: "AG304" },
                        "å°ˆé•·æ•™å¸«æˆèª²ç­ç´šç¼ºæ› çµ±è¨ˆæŸ¥è©¢", "æ•™å¸«æˆèª²ç­ç´šé»åè¨˜éŒ„æŸ¥è©¢", "è³´æ°äººæ ¼æ¸¬é©—çµæœæŸ¥è©¢"
                    ]}
                ]
            },
            {
                name: "ç™»éŒ„",
                children: [
                    { name: "æ•™å‹™è³‡è¨Šç™»éŒ„", items: [
                        "èª²ç¨‹å¤§ç¶±è¼¸å…¥ä½œæ¥­",
                        { name: "å­¸æœŸæˆç¸¾è¼¸å…¥ä½œæ¥­", fncId: "KP2A2" },
                        "ä»£è¡¨éšŠæˆç¸¾è¼¸å…¥ä½œæ¥­"
                    ]},
                    { name: "å­¸å‹™ç™»éŒ„ä½œæ¥­", items: ["å•å·èª¿æŸ¥", "å­¸ç”Ÿçæ‡²å»ºè­°è¡¨ç™»éŒ„"] },
                    { name: "å¸«åŸ¹è³‡è¨Šç™»éŒ„", items: ["æ•™ç¨‹èª²ç¨‹ç™»éŒ„å¯¦åœ°å­¸ç¿’æ™‚æ•¸(æ•™å¸«)", "å¸«åŸ¹æŠµå…å¯©æ ¸ä½œæ¥­"] },
                    { name: "é€šè­˜è³‡è¨Šç™»éŒ„", items: ["é€šè­˜èª²ç¨‹ç²¾é€²ç³»çµ±"] },
                    { name: "äººäº‹è³‡è¨Šç™»éŒ„", items: ["äººäº‹åŸºæœ¬è³‡æ–™ç¶­è­·ä½œæ¥­"] }
                ]
            },
            {
                name: "ç”³è«‹",
                children: [
                    { name: "å­¸å‹™è³‡è¨Šç”³è«‹", items: ["ç‡Ÿé¤Šè«®è©¢é ç´„ç”³è«‹", "è·¨ç­å…¬å‡ç”³è«‹ä½œæ¥­"] }
                ]
            },
            {
                name: "æ•™å¸«e-Portfolio",
                children: [
                    { name: "EPortfolioå‘ˆç¾è¨­å®š", items: ["æ•™å¸«å€‹äººè³‡æ–™ç¶­è­·", "EPæª¢è¦–æ¬Šé™è¨­å®š", "å€‹äººCVé è¦½"] }
                ]
            },
            {
                name: "æ•™å¸«è©•é‘‘ç³»çµ±",
                children: [
                    { name: "æ•™å¸«è©•é‘‘", items: ["æ•™å¸«è©•é‘‘è©•åˆ†è¡¨", "æ•™å¸«è©•é‘‘å¯©æŸ¥", "æ•™å¸«è©•é‘‘è³‡æ–™æŸ¥è©¢"] }
                ]
            },
            {
                name: "è–ªè³‡ç³»çµ±",
                children: [
                    { name: "è–ªè³‡æ˜ç´°æŸ¥è©¢", items: [
                        { name: "è–ªè³‡æ‰€å¾—æŸ¥è©¢ä½œæ¥­", fncId: "ZGB204" },
                        "é˜é»è²»æŸ¥è©¢",
                        { name: "æ‰£ç¹³æ†‘å–®æŸ¥è©¢", fncId: "ZGC205" },
                        "æ‰£ç¹³æ˜ç´°å¹´å ±è¡¨",
                        { name: "åŠƒæ’¥å…¥å¸³æŸ¥è©¢", fncId: "ZGD001" }
                    ]}
                ]
            },
            {
                name: "å‡ºç´ç³»çµ±",
                children: [
                    { name: "ç¹³è²»æŸ¥è©¢", items: ["ç¹³è²»è­‰æ˜å–®åˆ—å°ä½œæ¥­"] },
                    { name: "å°é ˜æ¸…å†Š", items: ["å°é ˜æ¸…å†Šé€ å†Šä½œæ¥­"] }
                ]
            },
            {
                name: "äººäº‹ç³»çµ±",
                children: [
                    { name: "å¡«å¯«æ–°è¡¨å–®", items: [] },
                    { name: "ç³»çµ±å…¬å‘Š", items: [] },
                    { name: "å·®å‹¤æŸ¥è©¢", items: ["åˆ·å¡è¨˜éŒ„æŸ¥è©¢ä½œæ¥­"] },
                    { name: "å¾…è¾¦ä½œæ¥­", items: [
                        "æ•™å¸«å‡ç­‰æ¨è–¦ä½œæ¥­",
                        { name: "ç°½æ ¸ä½œæ¥­(0)", fncId: "0A000" }
                    ]}
                ]
            },
            {
                name: "ç ”è¨æœƒç³»çµ±",
                children: [
                    { name: "ç ”è¨æœƒå ±åç®¡ç†", items: ["æ´»å‹•å…¬å‘Šè¨Šæ¯æª¢è¦–", "æ´»å‹•è³‡è¨ŠæŸ¥è©¢åŠå ±å", "æ´»å‹•å ±åä¿®æ”¹å–æ¶ˆåŠæŸ¥è©¢"] }
                ]
            },
            {
                name: "ç¸½å‹™ç³»çµ±",
                children: [
                    { name: "å™¨æå€Ÿç”¨ç®¡ç†", items: ["é«”è‚²å™¨æå€Ÿç”¨ç”³è«‹ä½œæ¥­"] },
                    { name: "è²¡ç”¢ç®¡ç†", items: ["è²¡ç‰©æŸ¥è©¢", "è²¡ç”¢å¢åŠ ä½œæ¥­", "è²¡ç‰©ç§»è½‰ä½œæ¥­", "è²¡ç”¢æ¸›æä½œæ¥­"] },
                    { name: "ä¿®ç¹•ç³»çµ±", items: ["å ±ä¿®ç”³è«‹åŠæŸ¥è©¢ä½œæ¥­"] },
                    { name: "å…¬å‹™è»Šç®¡ç†ç³»çµ±", items: ["å…¬å‹™è»Šç®¡ç†ç³»çµ±(æ¸¬è©¦ä¸­)"] },
                    { name: "å ´åœ°å€Ÿç”¨ç®¡ç†", items: [
                        "03.ç¹³è²»å–®æŸ¥è©¢åˆ—å°ä½œæ¥­", "04.å ´åœ°ä½¿ç”¨ç‹€æ³è¡¨", "05.å ´åœ°ä½¿ç”¨ä¸€è¦½è¡¨",
                        "01.å ´åœ°å€Ÿç”¨ç”³è«‹(å–æ¶ˆ)ä½œæ¥­", "02.å ´åœ°å€Ÿç”¨ç°½æ ¸ä½œæ¥­"
                    ]},
                    { name: "æ¶ˆè€—å“ç®¡ç†ç³»çµ±", items: ["æ¶ˆè€—å“è«‹é ˜ä½œæ¥­"] },
                    { name: "ç°½æ ¸ä½œæ¥­ç³»çµ±", items: [
                        { name: "ç°½æ ¸ä½œæ¥­", fncId: "SIGN001" },
                        { name: "æ­·å²ç°½æ ¸æŸ¥è©¢", fncId: "0A003" },
                        "ä»£ç†äººä½œæ¥­",
                        { name: "é›»å­è¡¨å–®ç°½æ ¸ä½œæ¥­", fncId: "0F001" }
                    ]},
                    { name: "é›»å­è¡¨å–®", items: ["è‡¨æ™‚åœè»Šè­‰ç”³è«‹", "è¨ˆä¸­è²¡ç‰©å€Ÿç”¨è¡¨å–®", "è¨ˆä¸­å ´åœ°å€Ÿç”¨å–®", "è¨ˆä¸­è²¡ç‰©æ­¸é‚„å–®", "æŸ¥è©¢ä½œæ¥­"] }
                ]
            },
            {
                name: "åŠ©ç†ç´„(é€²)ç”¨ç®¡ç†ç³»çµ±",
                children: [
                    { name: "ç™»éŒ„", items: [
                        "è¨ˆç•«ç™»éŒ„ä½œæ¥­",
                        { name: "è¨ˆç•«åŠ©ç†ç´„(é€²)ç”¨ç™»éŒ„ä½œæ¥­", fncId: "UAA002" },
                        { name: "æ‡‰è˜äººå“¡ç¢ºèªä½œæ¥­", fncId: "UAA002_1" }
                    ]}
                ]
            },
            {
                name: "æŠ•ç¥¨èˆ‡æ»¿æ„åº¦èª¿æŸ¥ç³»çµ±",
                children: [
                    { name: "æŠ•ç¥¨èˆ‡æ»¿æ„åº¦", items: ["é¤å»³æ»¿æ„åº¦å¡«å¯«ä½œæ¥­", "ç¥¨é¸æ´»å‹•å ±åä½œæ¥­", "æŠ•ç¥¨ä½œæ¥­"] }
                ]
            }
        ];

        // æ•™å¸«é¸å–®çµæ§‹ï¼ˆè·å“¡ + æ•™å¸«å°ˆå±¬åŠŸèƒ½ï¼‰
        const teacherMenuStructure = [
            {
                name: "æˆ‘çš„æœ€æ„›",
                teacherOnly: true,
                children: [{
                    name: "ç·¨è¼¯æˆ‘çš„æœ€æ„›",
                    items: [
                        { name: "èª²ç¨‹å¤§ç¶±è¼¸å…¥ä½œæ¥­", teacherDefault: true },
                        { name: "å­¸æœŸæˆç¸¾è¼¸å…¥ä½œæ¥­", teacherDefault: true },
                        { name: "æˆèª²è€å¸«ç¶²è·¯é»åä½œæ¥­", teacherDefault: true },
                        { name: "å°å¸«æ“è¡Œæˆç¸¾ç™»éŒ„ä½œæ¥­", teacherDefault: true },
                        { name: "å°å¸«å€‹åˆ¥è¼”å°ç´€éŒ„ç™»éŒ„", teacherDefault: true },
                        { name: "å°å¸«åœ˜é«”è¼”å°ç™»éŒ„ä½œæ¥­", teacherDefault: true }
                    ]
                }]
            },
            {
                name: "ç³»çµ±å…¬å‘Šèˆ‡ä¸‹è¼‰",
                children: [
                    { name: "æ“ä½œæ‰‹å†Š", items: ["æ•™è·å“¡å·¥--æ‰‹å†Šä¸‹è¼‰"] },
                    { name: "è¡Œäº‹æ›†", items: ["è¡Œäº‹æ›†æŸ¥è©¢åˆ—å°ä½œæ¥­"] }
                ]
            },
            {
                name: "è¨Šæ¯å¹³å°",
                children: [
                    { name: "è¨Šæ¯å¹³å°ç³»çµ±", items: ["ä½¿ç”¨è€…æ¬Šé™è¨­å®š", "é€šå‘Šè¨Šæ¯ç”³è«‹ä½œæ¥­", "é€šå‘Šç”³è«‹ç°½æ ¸ä½œæ¥­"] }
                ]
            },
            {
                name: "æŸ¥è©¢",
                children: [
                    { name: "æ•™å‹™è³‡è¨ŠæŸ¥è©¢", items: [
                        "æ•™å­¸è©•é‡çµæœæŸ¥è©¢", "æ•™å­¸è©•é‡å³æ™‚å¡«ç­”ç‡æŸ¥è©¢",
                        { name: "ç§‘ç›®èˆ‡æ•™å¸«é–‹èª²è³‡æ–™æŸ¥è©¢", fncId: "AG203" },
                        "å­¸ç”Ÿå­¸ç¿’é è­¦æŸ¥è©¢(å°å¸«ç”¨)", "ç•¢æ¥­è³‡æ ¼é å¯©è¡¨æŸ¥è©¢",
                        { name: "æ•™å¸«èª²è¡¨æŸ¥è©¢", fncId: "AG300" },
                        { name: "æ•™å®¤èª²è¡¨æŸ¥è©¢", fncId: "AG302" },
                        { name: "ç³»æ‰€ç­ç´šèª²è¡¨æŸ¥è©¢", fncId: "AG304" },
                        "å°ˆé•·æ•™å¸«æˆèª²ç­ç´šç¼ºæ› çµ±è¨ˆæŸ¥è©¢", "æ•™å¸«æˆèª²ç­ç´šé»åè¨˜éŒ„æŸ¥è©¢", "è³´æ°äººæ ¼æ¸¬é©—çµæœæŸ¥è©¢",
                        { name: "ç­ç´šå­¸ç”Ÿå­¸ç±æŸ¥è©¢", teacherOnly: true },
                        { name: "é–‹èª²é¸èª²è³‡æ–™æŸ¥è©¢(å«é»åå–®)", teacherOnly: true }
                    ]},
                    { name: "å­¸å‹™è³‡è¨ŠæŸ¥è©¢", teacherOnly: true, items: [
                        { name: "å°å¸«ç­ç´šçæ‡²æŸ¥è©¢", teacherOnly: true },
                        { name: "å°å¸«ç­ç´šç¼ºæ› æŸ¥è©¢", teacherOnly: true },
                        { name: "å°å¸«è¼”å°ç´€éŒ„æŸ¥è©¢", teacherOnly: true }
                    ]}
                ]
            },
            {
                name: "ç™»éŒ„",
                children: [
                    { name: "æ•™å‹™è³‡è¨Šç™»éŒ„", items: [
                        "èª²ç¨‹å¤§ç¶±è¼¸å…¥ä½œæ¥­",
                        { name: "å­¸æœŸæˆç¸¾è¼¸å…¥ä½œæ¥­", fncId: "KP2A2" },
                        "ä»£è¡¨éšŠæˆç¸¾è¼¸å…¥ä½œæ¥­",
                        { name: "å­¸ç”Ÿå­¸ç¿’é è­¦", teacherOnly: true }
                    ]},
                    { name: "å­¸å‹™ç™»éŒ„ä½œæ¥­", items: [
                        "å•å·èª¿æŸ¥", "å­¸ç”Ÿçæ‡²å»ºè­°è¡¨ç™»éŒ„",
                        { name: "ç­ç´šå¹¹éƒ¨ç•¶é¸äººåå–®ç™»éŒ„", teacherOnly: true },
                        { name: "æˆèª²è€å¸«ç¶²è·¯é»åä½œæ¥­", teacherOnly: true },
                        { name: "å°å¸«å€‹åˆ¥è¼”å°ç´€éŒ„ç™»éŒ„", teacherOnly: true },
                        { name: "å°å¸«åœ˜é«”è¼”å°ç™»éŒ„ä½œæ¥­", teacherOnly: true },
                        { name: "å°å¸«æ“è¡Œæˆç¸¾ç™»éŒ„ä½œæ¥­", teacherOnly: true }
                    ]},
                    { name: "å¸«åŸ¹è³‡è¨Šç™»éŒ„", items: ["æ•™ç¨‹èª²ç¨‹ç™»éŒ„å¯¦åœ°å­¸ç¿’æ™‚æ•¸(æ•™å¸«)", "å¸«åŸ¹æŠµå…å¯©æ ¸ä½œæ¥­"] },
                    { name: "é€šè­˜è³‡è¨Šç™»éŒ„", items: ["é€šè­˜èª²ç¨‹ç²¾é€²ç³»çµ±"] },
                    { name: "äººäº‹è³‡è¨Šç™»éŒ„", items: ["äººäº‹åŸºæœ¬è³‡æ–™ç¶­è­·ä½œæ¥­"] }
                ]
            },
            {
                name: "ç”³è«‹",
                children: [
                    { name: "å­¸å‹™è³‡è¨Šç”³è«‹", items: ["ç‡Ÿé¤Šè«®è©¢é ç´„ç”³è«‹", "è·¨ç­å…¬å‡ç”³è«‹ä½œæ¥­"] }
                ]
            },
            {
                name: "æ•™å¸«e-Portfolio",
                children: [
                    { name: "EPortfolioå‘ˆç¾è¨­å®š", items: ["æ•™å¸«å€‹äººè³‡æ–™ç¶­è­·", "EPæª¢è¦–æ¬Šé™è¨­å®š", "å€‹äººCVé è¦½"] }
                ]
            },
            {
                name: "æ•™å¸«è©•é‘‘ç³»çµ±",
                children: [
                    { name: "æ•™å¸«è©•é‘‘", items: ["æ•™å¸«è©•é‘‘è©•åˆ†è¡¨", "æ•™å¸«è©•é‘‘å¯©æŸ¥", "æ•™å¸«è©•é‘‘è³‡æ–™æŸ¥è©¢"] }
                ]
            },
            {
                name: "è–ªè³‡ç³»çµ±",
                children: [
                    { name: "è–ªè³‡æ˜ç´°æŸ¥è©¢", items: [
                        { name: "è–ªè³‡æ‰€å¾—æŸ¥è©¢ä½œæ¥­", fncId: "ZGB204" },
                        "é˜é»è²»æŸ¥è©¢",
                        { name: "æ‰£ç¹³æ†‘å–®æŸ¥è©¢", fncId: "ZGC205" },
                        "æ‰£ç¹³æ˜ç´°å¹´å ±è¡¨",
                        { name: "åŠƒæ’¥å…¥å¸³æŸ¥è©¢", fncId: "ZGD001" }
                    ]}
                ]
            },
            {
                name: "å‡ºç´ç³»çµ±",
                children: [
                    { name: "ç¹³è²»æŸ¥è©¢", items: ["ç¹³è²»è­‰æ˜å–®åˆ—å°ä½œæ¥­"] },
                    { name: "å°é ˜æ¸…å†Š", items: ["å°é ˜æ¸…å†Šé€ å†Šä½œæ¥­"] }
                ]
            },
            {
                name: "äººäº‹ç³»çµ±",
                children: [
                    { name: "å¡«å¯«æ–°è¡¨å–®", items: [] },
                    { name: "ç³»çµ±å…¬å‘Š", items: [] },
                    { name: "å·®å‹¤æŸ¥è©¢", items: [
                        "åˆ·å¡è¨˜éŒ„æŸ¥è©¢ä½œæ¥­",
                        { name: "ä¸€ç´šä¸»ç®¡å‡ºå‹¤æŸ¥è©¢", teacherOnly: true },
                        { name: "å…¨æ ¡å“¡å·¥å‡ºå‹¤æŸ¥è©¢", teacherOnly: true },
                        { name: "ä¸»ç®¡æŸ¥è©¢å–®ä½åŒä»åˆ·å¡è¨˜éŒ„", teacherOnly: true },
                        { name: "ä¸»ç®¡æŸ¥è©¢å–®ä½åŒä»è«‹å‡è¨˜éŒ„", teacherOnly: true }
                    ]},
                    { name: "å¾…è¾¦ä½œæ¥­", items: [
                        "æ•™å¸«å‡ç­‰æ¨è–¦ä½œæ¥­",
                        { name: "ç°½æ ¸ä½œæ¥­(0)", fncId: "0A000" }
                    ]}
                ]
            },
            {
                name: "ç ”è¨æœƒç³»çµ±",
                children: [
                    { name: "ç ”è¨æœƒå ±åç®¡ç†", items: ["æ´»å‹•å…¬å‘Šè¨Šæ¯æª¢è¦–", "æ´»å‹•è³‡è¨ŠæŸ¥è©¢åŠå ±å", "æ´»å‹•å ±åä¿®æ”¹å–æ¶ˆåŠæŸ¥è©¢"] }
                ]
            },
            {
                name: "ç¸½å‹™ç³»çµ±",
                children: [
                    { name: "å™¨æå€Ÿç”¨ç®¡ç†", items: ["é«”è‚²å™¨æå€Ÿç”¨ç”³è«‹ä½œæ¥­"] },
                    { name: "è²¡ç”¢ç®¡ç†", items: ["è²¡ç‰©æŸ¥è©¢", "è²¡ç”¢å¢åŠ ä½œæ¥­", "è²¡ç‰©ç§»è½‰ä½œæ¥­", "è²¡ç”¢æ¸›æä½œæ¥­"] },
                    { name: "ä¿®ç¹•ç³»çµ±", items: ["å ±ä¿®ç”³è«‹åŠæŸ¥è©¢ä½œæ¥­"] },
                    { name: "å…¬å‹™è»Šç®¡ç†ç³»çµ±", items: ["å…¬å‹™è»Šç®¡ç†ç³»çµ±(æ¸¬è©¦ä¸­)"] },
                    { name: "å ´åœ°å€Ÿç”¨ç®¡ç†", items: [
                        "03.ç¹³è²»å–®æŸ¥è©¢åˆ—å°ä½œæ¥­", "04.å ´åœ°ä½¿ç”¨ç‹€æ³è¡¨", "05.å ´åœ°ä½¿ç”¨ä¸€è¦½è¡¨",
                        "01.å ´åœ°å€Ÿç”¨ç”³è«‹(å–æ¶ˆ)ä½œæ¥­", "02.å ´åœ°å€Ÿç”¨ç°½æ ¸ä½œæ¥­"
                    ]},
                    { name: "æ¶ˆè€—å“ç®¡ç†ç³»çµ±", items: ["æ¶ˆè€—å“è«‹é ˜ä½œæ¥­"] },
                    { name: "ç°½æ ¸ä½œæ¥­ç³»çµ±", items: [
                        { name: "ç°½æ ¸ä½œæ¥­", fncId: "SIGN001" },
                        { name: "æ­·å²ç°½æ ¸æŸ¥è©¢", fncId: "0A003" },
                        "ä»£ç†äººä½œæ¥­",
                        { name: "é›»å­è¡¨å–®ç°½æ ¸ä½œæ¥­", fncId: "0F001" }
                    ]},
                    { name: "é›»å­è¡¨å–®", items: ["è‡¨æ™‚åœè»Šè­‰ç”³è«‹", "è¨ˆä¸­è²¡ç‰©å€Ÿç”¨è¡¨å–®", "è¨ˆä¸­å ´åœ°å€Ÿç”¨å–®", "è¨ˆä¸­è²¡ç‰©æ­¸é‚„å–®", "æŸ¥è©¢ä½œæ¥­"] }
                ]
            },
            {
                name: "åŠ©ç†ç´„(é€²)ç”¨ç®¡ç†ç³»çµ±",
                children: [
                    { name: "ç™»éŒ„", items: [
                        "è¨ˆç•«ç™»éŒ„ä½œæ¥­",
                        { name: "è¨ˆç•«åŠ©ç†ç´„(é€²)ç”¨ç™»éŒ„ä½œæ¥­", fncId: "UAA002" },
                        { name: "æ‡‰è˜äººå“¡ç¢ºèªä½œæ¥­", fncId: "UAA002_1" }
                    ]}
                ]
            },
            {
                name: "æŠ•ç¥¨èˆ‡æ»¿æ„åº¦èª¿æŸ¥ç³»çµ±",
                children: [
                    { name: "æŠ•ç¥¨èˆ‡æ»¿æ„åº¦", items: ["é¤å»³æ»¿æ„åº¦å¡«å¯«ä½œæ¥­", "ç¥¨é¸æ´»å‹•å ±åä½œæ¥­", "æŠ•ç¥¨ä½œæ¥­"] }
                ]
            }
        ];

        // å­¸ç”Ÿæˆ‘çš„æœ€æ„›çµ±è¨ˆ
        const studentFavorites = {
            '0A000': { name: 'ä¸€èˆ¬ç·šä¸ŠåŠ é€€é¸', count: 520 },
            'AG222': { name: 'æˆ‘çš„èª²è¡¨', count: 485 },
            'AG102': { name: 'å­¸ç”Ÿæ­·å¹´æˆç¸¾æŸ¥è©¢', count: 456 },
            '00B04': { name: 'å­¸åˆ†å­¸ç¨‹åŠ é€€é¸', count: 312 },
            '00B01': { name: 'å¸«åŸ¹å­¸ç¨‹èª²ç¨‹åŠ é€€é¸', count: 287 },
            'AG304': { name: 'ç³»æ‰€ç­ç´šèª²è¡¨æŸ¥è©¢', count: 245 },
            'AG650': { name: 'ç•¢æ¥­å¯©æ ¸çµæœæŸ¥è©¢', count: 198 },
            'ZGC204': { name: 'ç¹³è²»å–®åˆ—å°ä½œæ¥­', count: 187 },
            'AG225': { name: 'åœ¨å­¸è­‰æ˜', count: 165 },
            'AK002': { name: 'å­¸ç”Ÿå€‹äººç¼ºæ› è«‹å‡æ˜ç´°è¡¨', count: 143 },
            '00B02': { name: 'é›™ä¸»ä¿®èª²ç¨‹åŠ é€€é¸', count: 132 },
            '00B03': { name: 'è¼”ç³»èª²ç¨‹åŠ é€€é¸', count: 125 },
            'AG305': { name: 'æœŸä¸­é è­¦æŸ¥è©¢', count: 118 },
            '00B05': { name: 'å¸«åŸ¹å­¸ç¨‹èª²ç¨‹é é¸', count: 98 },
            'AG203': { name: 'ç§‘ç›®èˆ‡æ•™å¸«é–‹èª²è³‡æ–™æŸ¥è©¢', count: 87 }
        };

        // è·å“¡æˆ‘çš„æœ€æ„›çµ±è¨ˆ
        const staffFavorites = {
            '0A000': { name: 'ç°½æ ¸ä½œæ¥­', count: 436 },
            'KP2A2': { name: 'å­¸æœŸæˆç¸¾è¼¸å…¥ä½œæ¥­', count: 341 },
            '0A003': { name: 'æ­·å²ç°½æ ¸æŸ¥è©¢', count: 328 },
            'AG304': { name: 'ç³»æ‰€ç­ç´šèª²è¡¨æŸ¥è©¢', count: 234 },
            'ZZP800': { name: 'å ±è¡¨æŸ¥è©¢åˆ—å°ä½œæ¥­', count: 232 },
            '0F001': { name: 'é›»å­è¡¨å–®ç°½æ ¸ä½œæ¥­', count: 221 },
            'AG203': { name: 'ç§‘ç›®èˆ‡æ•™å¸«é–‹èª²è³‡æ–™æŸ¥è©¢', count: 202 },
            'ZGC204': { name: 'ç¹³è²»å–®åˆ—å°ä½œæ¥­', count: 199 },
            'ZGB204': { name: 'è–ªè³‡æ‰€å¾—æŸ¥è©¢ä½œæ¥­', count: 119 },
            'ZGC205': { name: 'æ‰£ç¹³æ†‘å–®æŸ¥è©¢', count: 117 },
            'AG650': { name: 'ç•¢æ¥­è³‡æ ¼é å¯©è¡¨æŸ¥è©¢', count: 105 },
            'UAA002_1': { name: 'æ‡‰è˜äººå“¡ç¢ºèªä½œæ¥­', count: 97 },
            'ZGD001': { name: 'åŠƒæ’¥å…¥å¸³æŸ¥è©¢', count: 96 },
            'AG300': { name: 'æ•™å¸«èª²è¡¨æŸ¥è©¢', count: 92 },
            'AG302': { name: 'æ•™å®¤èª²è¡¨æŸ¥è©¢', count: 87 }
        };

        // æ•™å¸«æˆ‘çš„æœ€æ„›çµ±è¨ˆï¼ˆè·å“¡çµ±è¨ˆ + æ•™å¸«ç‰¹æœ‰é«˜é »åŠŸèƒ½ï¼‰
        const teacherFavorites = {
            'KP2A2': { name: 'å­¸æœŸæˆç¸¾è¼¸å…¥ä½œæ¥­', count: 520 },
            'KPCG1': { name: 'èª²ç¨‹å¤§ç¶±è¼¸å…¥ä½œæ¥­', count: 485 },
            'DNAME': { name: 'æˆèª²è€å¸«ç¶²è·¯é»åä½œæ¥­', count: 412 },
            '0A000': { name: 'ç°½æ ¸ä½œæ¥­', count: 380 },
            'TUTOR1': { name: 'å°å¸«å€‹åˆ¥è¼”å°ç´€éŒ„ç™»éŒ„', count: 298 },
            'TUTOR2': { name: 'å°å¸«æ“è¡Œæˆç¸¾ç™»éŒ„ä½œæ¥­', count: 267 },
            '0A003': { name: 'æ­·å²ç°½æ ¸æŸ¥è©¢', count: 245 },
            'AG304': { name: 'ç³»æ‰€ç­ç´šèª²è¡¨æŸ¥è©¢', count: 234 },
            '0F001': { name: 'é›»å­è¡¨å–®ç°½æ ¸ä½œæ¥­', count: 198 },
            'ZGB204': { name: 'è–ªè³‡æ‰€å¾—æŸ¥è©¢ä½œæ¥­', count: 156 },
            'ZGC205': { name: 'æ‰£ç¹³æ†‘å–®æŸ¥è©¢', count: 134 },
            'AG300': { name: 'æ•™å¸«èª²è¡¨æŸ¥è©¢', count: 128 },
            'TUTOR3': { name: 'å°å¸«åœ˜é«”è¼”å°ç™»éŒ„ä½œæ¥­', count: 112 },
            'ZGD001': { name: 'åŠƒæ’¥å…¥å¸³æŸ¥è©¢', count: 98 },
            'EVAL': { name: 'æ•™å­¸è©•é‡çµæœæŸ¥è©¢', count: 87 }
        };

        // ç²å–ä½¿ç”¨é‡ç­‰ç´š
        function getUsageLevel(count) {
            if (count >= 300) return { class: 'usage-hot', label: 'ğŸ”¥ ç†±é–€' };
            if (count >= 150) return { class: 'usage-warm', label: 'â­ å¸¸ç”¨' };
            if (count >= 80) return { class: 'usage-normal', label: 'ğŸ“Œ æ”¶è—' };
            return null;
        }

        // åˆ‡æ›èº«åˆ†
        function switchRole(role) {
            currentRole = role;

            // Update buttons
            document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.role-btn.${role}`).classList.add('active');

            // Update current role display
            const roleDisplay = document.getElementById('currentRole');
            const roleIcon = document.getElementById('roleIcon');
            const roleName = document.getElementById('roleName');

            roleDisplay.className = 'current-role ' + role;
            if (role === 'student') {
                roleIcon.textContent = 'ğŸ“';
                roleName.textContent = 'å­¸ç”Ÿ OOO (U1110****)';
            } else if (role === 'staff') {
                roleIcon.textContent = 'ğŸ‘”';
                roleName.textContent = 'è·å“¡ OOO';
            } else {
                roleIcon.textContent = 'ğŸ‘¨â€ğŸ«';
                roleName.textContent = 'æ•™å¸« OOOï¼ˆå«å°å¸«ã€ä¸»ç®¡æ¬Šé™ï¼‰';
            }

            // Re-render content
            renderMenu();
            renderContent();
        }

        // åˆ‡æ›åˆ†é 
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            document.getElementById('previewView').style.display = 'none';
            document.getElementById('comparisonView').classList.remove('active');
            document.getElementById('teacherDiffView').classList.remove('active');
            document.getElementById('statsView').classList.remove('active');

            if (tabName === 'preview') {
                document.getElementById('previewView').style.display = 'flex';
            } else if (tabName === 'comparison') {
                document.getElementById('comparisonView').classList.add('active');
            } else if (tabName === 'teacher-diff') {
                document.getElementById('teacherDiffView').classList.add('active');
            } else if (tabName === 'stats') {
                document.getElementById('statsView').classList.add('active');
            }
        }

        // æ¸²æŸ“é¸å–®
        function renderMenu() {
            const sidebar = document.getElementById('menuSidebar');
            let menuStructure;
            let favorites;

            if (currentRole === 'student') {
                menuStructure = studentMenuStructure;
                favorites = studentFavorites;
            } else if (currentRole === 'staff') {
                menuStructure = staffMenuStructure;
                favorites = staffFavorites;
            } else {
                menuStructure = teacherMenuStructure;
                favorites = teacherFavorites;
            }

            let html = '';

            menuStructure.forEach((level1, idx1) => {
                const isTeacherOnlyL1 = level1.teacherOnly && currentRole === 'teacher';
                html += `
                    <div class="menu-level1">
                        <div class="menu-level1-header ${currentRole}" onclick="toggleLevel1(this)">
                            <span>${level1.name}${isTeacherOnlyL1 ? ' <span class="badge-teacher-only">æ•™å¸«å°ˆå±¬</span>' : ''}</span>
                            <span class="arrow">â–¶</span>
                        </div>
                        <div class="menu-level1-content">
                `;

                level1.children.forEach((level2, idx2) => {
                    const hasItems = level2.items && level2.items.length > 0;
                    const isTeacherOnlyL2 = level2.teacherOnly && currentRole === 'teacher';
                    html += `
                        <div class="menu-level2">
                            <div class="menu-level2-header" ${hasItems ? 'onclick="toggleLevel2(this)"' : ''}>
                                <span>${level2.name}${isTeacherOnlyL2 ? ' <span class="badge-teacher-only">æ•™å¸«å°ˆå±¬</span>' : ''}</span>
                                ${hasItems ? '<span class="arrow">â–¶</span>' : ''}
                            </div>
                            ${hasItems ? `
                                <div class="menu-level2-content">
                                    ${level2.items.map(item => {
                                        const itemName = typeof item === 'string' ? item : item.name;
                                        const fncId = typeof item === 'object' ? item.fncId : null;
                                        const isTeacherOnly = typeof item === 'object' && item.teacherOnly;
                                        const isTeacherDefault = typeof item === 'object' && item.teacherDefault;
                                        const favData = fncId ? favorites[fncId] : null;
                                        const usageLevel = favData ? getUsageLevel(favData.count) : null;

                                        return `
                                            <div class="menu-item">
                                                <span>
                                                    ${itemName}
                                                    ${isTeacherOnly ? '<span class="badge-teacher-only">æ•™å¸«</span>' : ''}
                                                    ${isTeacherDefault ? '<span class="badge-teacher-only">é è¨­</span>' : ''}
                                                </span>
                                                ${usageLevel ? `<span class="${usageLevel.class}">${usageLevel.label} (${favData.count})</span>` : ''}
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            ` : ''}
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            sidebar.innerHTML = html;
        }

        // å±•é–‹/æ”¶åˆ Level 1
        function toggleLevel1(header) {
            header.classList.toggle('expanded');
            const content = header.nextElementSibling;
            content.classList.toggle('expanded');
        }

        // å±•é–‹/æ”¶åˆ Level 2
        function toggleLevel2(header) {
            header.classList.toggle('expanded');
            const content = header.nextElementSibling;
            if (content) content.classList.toggle('expanded');
        }

        // æ¸²æŸ“å…§å®¹å€
        function renderContent() {
            const titleIcon = document.getElementById('titleIcon');
            const titleText = document.getElementById('titleText');
            const statsHeader = document.getElementById('statsHeader');

            let menuStructure, favorites;

            if (currentRole === 'student') {
                menuStructure = studentMenuStructure;
                favorites = studentFavorites;
            } else if (currentRole === 'staff') {
                menuStructure = staffMenuStructure;
                favorites = staffFavorites;
            } else {
                menuStructure = teacherMenuStructure;
                favorites = teacherFavorites;
            }

            // Update title
            if (currentRole === 'student') {
                titleIcon.textContent = 'ğŸ“';
                titleText.textContent = 'å­¸ç”Ÿé¸å–®çµæ§‹';
                statsHeader.className = 'stats-section student';
                document.getElementById('statCategories').textContent = '13';
                document.getElementById('statSubcategories').textContent = '25';
                document.getElementById('statFunctions').textContent = '85';
            } else if (currentRole === 'staff') {
                titleIcon.textContent = 'ğŸ‘”';
                titleText.textContent = 'è·å“¡é¸å–®çµæ§‹';
                statsHeader.className = 'stats-section staff';
                document.getElementById('statCategories').textContent = '17';
                document.getElementById('statSubcategories').textContent = '30';
                document.getElementById('statFunctions').textContent = '75';
            } else {
                titleIcon.textContent = 'ğŸ‘¨â€ğŸ«';
                titleText.textContent = 'æ•™å¸«é¸å–®çµæ§‹ï¼ˆå«å°å¸«/ä¸»ç®¡åŠŸèƒ½ï¼‰';
                statsHeader.className = 'stats-section teacher';
                document.getElementById('statCategories').textContent = '17';
                document.getElementById('statSubcategories').textContent = '32';
                document.getElementById('statFunctions').textContent = '95';
            }

            // Render quick actions
            renderQuickActions(favorites);

            // Render top functions list
            renderTopFunctions(favorites);

            // Render info box
            renderInfoBox();
        }

        // æ¸²æŸ“å¿«é€ŸåŠŸèƒ½
        function renderQuickActions(favorites) {
            const grid = document.getElementById('quickActionsGrid');
            const sortedFuncs = Object.entries(favorites)
                .sort((a, b) => b[1].count - a[1].count)
                .slice(0, 8);

            const icons = ['ğŸ“‹', 'ğŸ“Š', 'ğŸ“', 'ğŸ“š', 'âœï¸', 'ğŸ“…', 'ğŸ’°', 'ğŸ–¨ï¸'];

            grid.innerHTML = sortedFuncs.map(([id, data], idx) => `
                <div class="action-card ${currentRole}">
                    <div class="rank-badge">${idx + 1}</div>
                    <div class="icon">${icons[idx] || 'ğŸ“„'}</div>
                    <h4>${data.name.length > 10 ? data.name.substring(0, 10) + '...' : data.name}</h4>
                    <p>â­ ${data.count} äººæ”¶è—</p>
                </div>
            `).join('');
        }

        // æ¸²æŸ“æ’è¡Œæ¦œ
        function renderTopFunctions(favorites) {
            const list = document.getElementById('topFunctionsList');
            const sortedFuncs = Object.entries(favorites)
                .sort((a, b) => b[1].count - a[1].count)
                .slice(0, 10);

            const maxCount = sortedFuncs[0][1].count;

            list.innerHTML = sortedFuncs.map(([id, data], idx) => {
                let rankClass = 'normal';
                if (idx === 0) rankClass = 'gold';
                else if (idx === 1) rankClass = 'silver';
                else if (idx === 2) rankClass = 'bronze';

                const barWidth = (data.count / maxCount) * 100;

                return `
                    <div class="function-row">
                        <div class="function-rank ${rankClass}">${idx + 1}</div>
                        <div class="function-name">${data.name}</div>
                        <div class="function-count">${data.count} äºº</div>
                        <div class="function-bar">
                            <div class="function-bar-fill ${currentRole}" style="width: ${barWidth}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // æ¸²æŸ“èªªæ˜å€
        function renderInfoBox() {
            const infoList = document.getElementById('infoList');

            if (currentRole === 'student') {
                infoList.innerHTML = `
                    <li><strong>å­¸ç”Ÿå°ˆå±¬åŠŸèƒ½ï¼š</strong>å­¸ç”ŸEPï¼ˆå­¸ç¿’æ­·ç¨‹ï¼‰ã€é¸èª²ä½œæ¥­</li>
                    <li><strong>æœ€å¸¸ç”¨åŠŸèƒ½ï¼š</strong>é¸èª²åŠ é€€é¸ã€æˆ‘çš„èª²è¡¨ã€æˆç¸¾æŸ¥è©¢</li>
                    <li><strong>é¸å–®å±¤ç´šï¼š</strong>3 å±¤çµæ§‹ï¼ˆæ¨¡çµ„â†’å­é¡åˆ¥â†’åŠŸèƒ½ï¼‰</li>
                    <li><strong>åŠŸèƒ½æ¬Šé™ï¼š</strong>è³‡æ–™åº« 98 å€‹ fnc_idï¼ˆsts_id = '02'ï¼‰</li>
                    <li><strong>å»ºè­°æ”¹å–„ï¼š</strong>é¸èª²ç›¸é—œåŠŸèƒ½æ‡‰æ•´åˆåˆ°é¦–é å¿«æ·å€</li>
                `;
            } else if (currentRole === 'staff') {
                infoList.innerHTML = `
                    <li><strong>è·å“¡å°ˆå±¬åŠŸèƒ½ï¼š</strong>ç°½æ ¸ä¸­å¿ƒã€æ•™å¸«è©•é‘‘ã€äººäº‹ç³»çµ±</li>
                    <li><strong>æœ€å¸¸ç”¨åŠŸèƒ½ï¼š</strong>ç°½æ ¸ä½œæ¥­ã€æˆç¸¾ç™»éŒ„ã€è–ªè³‡æŸ¥è©¢</li>
                    <li><strong>é¸å–®å±¤ç´šï¼š</strong>3 å±¤çµæ§‹ï¼ˆæ¨¡çµ„â†’å­é¡åˆ¥â†’åŠŸèƒ½ï¼‰</li>
                    <li><strong>åŠŸèƒ½æ¬Šé™ï¼š</strong>è³‡æ–™åº« 77 å€‹ fnc_idï¼ˆsts_id = '01'ï¼‰</li>
                    <li><strong>å»ºè­°æ”¹å–„ï¼š</strong>ç°½æ ¸ç›¸é—œåŠŸèƒ½æ‡‰çµ±ä¸€å…¥å£ï¼Œæ¸›å°‘å°‹æ‰¾æ™‚é–“</li>
                `;
            } else {
                infoList.innerHTML = `
                    <li><strong>æ•™å¸«é¸å–®ç‰¹è‰²ï¼š</strong>è·å“¡åŠŸèƒ½ + æˆèª²æ•™å¸«(1A) + å°å¸«(1B) + ä¸»ç®¡æ¬Šé™</li>
                    <li><strong>æœ€å¸¸ç”¨åŠŸèƒ½ï¼š</strong>æˆç¸¾ç™»éŒ„ã€èª²ç¨‹å¤§ç¶±ã€é»åä½œæ¥­ã€å°å¸«è¼”å°</li>
                    <li><strong>æ•™å¸«å°ˆå±¬ï¼š</strong>ç´„ 20 é …é¡å¤–åŠŸèƒ½ï¼ˆç­ç´šç®¡ç†ã€å°å¸«è¼”å°ã€ä¸»ç®¡æŸ¥è©¢ï¼‰</li>
                    <li><strong>æˆ‘çš„æœ€æ„›ï¼š</strong>é è¨­ 6 é …å¸¸ç”¨åŠŸèƒ½ï¼ˆè·å“¡ç‰ˆç‚ºç©ºç™½ï¼‰</li>
                    <li><strong>å»ºè­°æ”¹å–„ï¼š</strong>æ•™å¸«å„€è¡¨æ¿æ‡‰çªé¡¯æˆç¸¾ç™»éŒ„ã€é»åã€å°å¸«åŠŸèƒ½</li>
                `;
            }
        }

        // æ¸²æŸ“å°ç…§è¡¨
        function renderComparisonTable() {
            const tbody = document.getElementById('comparisonBody');
            const comparisons = [
                { category: 'æˆ‘çš„æœ€æ„›', student: 'âœ…', staff: 'ç©ºç™½', teacher: '6é …é è¨­', note: 'æ•™å¸«æœ‰é è¨­æœ€æ„›' },
                { category: 'å­¸ç”ŸEP (å­¸ç¿’æ­·ç¨‹)', student: 'âœ…', staff: 'âŒ', teacher: 'âŒ', note: 'å­¸ç”Ÿå°ˆå±¬' },
                { category: 'é¸èª²ä½œæ¥­', student: 'âœ…', staff: 'âŒ', teacher: 'âŒ', note: 'å­¸ç”Ÿå°ˆå±¬' },
                { category: 'ç³»çµ±å…¬å‘Šèˆ‡ä¸‹è¼‰', student: 'âœ…', staff: 'âœ…', teacher: 'âœ…', note: 'ä¸‰è€…å…±ç”¨' },
                { category: 'è¨Šæ¯å¹³å°', student: 'âŒ', staff: 'âœ…', teacher: 'âœ…', note: 'æ•™è·å“¡å…±ç”¨' },
                { category: 'æŸ¥è©¢ > æ•™å‹™è³‡è¨Š', student: '12é …', staff: '11é …', teacher: '14é …', note: 'æ•™å¸«å¤šç­ç´šæŸ¥è©¢' },
                { category: 'æŸ¥è©¢ > å­¸å‹™è³‡è¨Š', student: '7é …', staff: 'âŒ', teacher: 'å°å¸«åŠŸèƒ½', note: 'å­¸ç”Ÿ/æ•™å¸«ä¸åŒ' },
                { category: 'ç™»éŒ„ > æ•™å‹™è³‡è¨Š', student: '7é …', staff: '3é …', teacher: '4é …', note: 'æ•™å¸«å¤šé è­¦åŠŸèƒ½' },
                { category: 'ç™»éŒ„ > å­¸å‹™ç™»éŒ„', student: '6é …', staff: '2é …', teacher: '7é …', note: 'æ•™å¸«å¤šå°å¸«/é»å' },
                { category: 'æ•™å¸«e-Portfolio', student: 'âŒ', staff: 'âœ…', teacher: 'âœ…', note: 'æ•™è·å“¡å…±ç”¨' },
                { category: 'æ•™å¸«è©•é‘‘ç³»çµ±', student: 'âŒ', staff: 'âœ…', teacher: 'âœ…', note: 'æ•™è·å“¡å…±ç”¨' },
                { category: 'è–ªè³‡ç³»çµ±', student: '1é …', staff: '5é …', teacher: '5é …', note: 'è·å“¡/æ•™å¸«ç›¸åŒ' },
                { category: 'äººäº‹ > å·®å‹¤æŸ¥è©¢', student: 'âŒ', staff: '1é …', teacher: '5é …', note: 'æ•™å¸«å¤šä¸»ç®¡åŠŸèƒ½' },
                { category: 'ç¸½å‹™ç³»çµ±', student: '1é …', staff: '25é …', teacher: '25é …', note: 'è·å“¡/æ•™å¸«ç›¸åŒ' },
                { category: 'æŠ•ç¥¨èˆ‡æ»¿æ„åº¦', student: 'âœ…', staff: 'âœ…', teacher: 'âœ…', note: 'ä¸‰è€…å…±ç”¨' }
            ];

            tbody.innerHTML = comparisons.map(c => `
                <tr>
                    <td><strong>${c.category}</strong></td>
                    <td>${c.student.includes('âœ…') ? `<span class="badge-student">${c.student}</span>` : c.student}</td>
                    <td>${c.staff.includes('âœ…') ? `<span class="badge-staff">${c.staff}</span>` : c.staff}</td>
                    <td>${c.teacher.includes('âœ…') ? `<span class="badge-teacher">${c.teacher}</span>` :
                         c.teacher.includes('é …') || c.teacher.includes('é è¨­') || c.teacher.includes('åŠŸèƒ½') ?
                         `<span class="badge-teacher">${c.teacher}</span>` : c.teacher}</td>
                    <td>${c.note}</td>
                </tr>
            `).join('');
        }

        // æ¸²æŸ“çµ±è¨ˆè¦–åœ–
        function renderStatsView() {
            // Student top list
            const studentList = document.getElementById('studentTopList');
            const studentSorted = Object.entries(studentFavorites)
                .sort((a, b) => b[1].count - a[1].count)
                .slice(0, 5);

            studentList.innerHTML = studentSorted.map(([id, data], idx) => `
                <div class="role-stat-row">
                    <span>${idx + 1}. ${data.name}</span>
                    <span><strong>${data.count}</strong></span>
                </div>
            `).join('');

            // Staff top list
            const staffList = document.getElementById('staffTopList');
            const staffSorted = Object.entries(staffFavorites)
                .sort((a, b) => b[1].count - a[1].count)
                .slice(0, 5);

            staffList.innerHTML = staffSorted.map(([id, data], idx) => `
                <div class="role-stat-row">
                    <span>${idx + 1}. ${data.name}</span>
                    <span><strong>${data.count}</strong></span>
                </div>
            `).join('');

            // Teacher top list
            const teacherList = document.getElementById('teacherTopList');
            const teacherSorted = Object.entries(teacherFavorites)
                .sort((a, b) => b[1].count - a[1].count)
                .slice(0, 5);

            teacherList.innerHTML = teacherSorted.map(([id, data], idx) => `
                <div class="role-stat-row">
                    <span>${idx + 1}. ${data.name}</span>
                    <span><strong>${data.count}</strong></span>
                </div>
            `).join('');

            // Overall ranking (combined)
            const overallList = document.getElementById('overallRankingList');
            const allFavorites = { ...studentFavorites };

            Object.entries(staffFavorites).forEach(([id, data]) => {
                if (allFavorites[id]) {
                    allFavorites[id].count = Math.max(allFavorites[id].count, data.count);
                } else {
                    allFavorites[id] = { ...data };
                }
            });

            Object.entries(teacherFavorites).forEach(([id, data]) => {
                if (allFavorites[id]) {
                    allFavorites[id].count = Math.max(allFavorites[id].count, data.count);
                } else {
                    allFavorites[id] = { ...data };
                }
            });

            const overallSorted = Object.entries(allFavorites)
                .sort((a, b) => b[1].count - a[1].count)
                .slice(0, 15);

            const maxCount = overallSorted[0][1].count;

            overallList.innerHTML = overallSorted.map(([id, data], idx) => {
                let rankClass = 'normal';
                if (idx === 0) rankClass = 'gold';
                else if (idx === 1) rankClass = 'silver';
                else if (idx === 2) rankClass = 'bronze';

                const barWidth = (data.count / maxCount) * 100;
                const isStudentFunc = studentFavorites[id] !== undefined;
                const isStaffFunc = staffFavorites[id] !== undefined;
                const isTeacherFunc = teacherFavorites[id] !== undefined;

                let badge = '';
                if (isStudentFunc && isStaffFunc && isTeacherFunc) {
                    badge = '<span class="badge-shared">å…¨éƒ¨</span>';
                } else if (isTeacherFunc && !isStudentFunc) {
                    badge = '<span class="badge-teacher">æ•™å¸«</span>';
                } else if (isStudentFunc && !isStaffFunc) {
                    badge = '<span class="badge-student">å­¸ç”Ÿ</span>';
                } else if (isStaffFunc) {
                    badge = '<span class="badge-staff">è·å“¡</span>';
                }

                return `
                    <div class="function-row">
                        <div class="function-rank ${rankClass}">${idx + 1}</div>
                        <div class="function-name">
                            ${data.name}
                            ${badge}
                        </div>
                        <div class="function-count">${data.count}</div>
                        <div class="function-bar">
                            <div class="function-bar-fill student" style="width: ${barWidth}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // åˆå§‹åŒ–
        function init() {
            renderMenu();
            renderContent();
            renderComparisonTable();
            renderStatsView();
        }

        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        init();
    </script>
</body>
</html>
